{"ast":null,"code":"import _toConsumableArray from\"/Users/juliablair/Desktop/christemp/ymun-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/juliablair/Desktop/christemp/ymun-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBackButton,IonBadge,IonButton,IonButtons,IonCol,IonContent,IonFooter,IonGrid,IonHeader,IonIcon,IonRow,IonToolbar}from'@ionic/react';import dayjs from'dayjs';import Interweave from'interweave';import{thumbsUp}from'ionicons/icons';import React,{useCallback,useState}from'react';import{useFetcher,useResource}from'rest-hooks';import FileResource from'../../resources/file';import PostResource from'../../resources/post';import UpvoteResource from'../../resources/upvote';import UserResource from'../../resources/user';var PostDetailInner=function PostDetailInner(_ref){var id=_ref.id;var post=useResource(PostResource.detailShape(),{id:id});var _useResource=useResource([UpvoteResource.listShape(),{'filter[post][=]':id}],[UserResource.detailShape(),{id:post.created_by}],[FileResource.detailShape(),{id:post.header_image}]),_useResource2=_slicedToArray(_useResource,3),upvotes=_useResource2[0],author=_useResource2[1],headerImage=_useResource2[2];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),didUpvote=_useState2[0],setDidUpvote=_useState2[1];var upvoteFetcher=useFetcher(UpvoteResource.createShape(),true);var makeUpvote=useCallback(function(){upvoteFetcher({},{post:parseInt(id,10)},[[UpvoteResource.listShape(),{'filter[post][=]':id},function(upvoteId,upvoteIds){return[].concat(_toConsumableArray(upvoteIds||[]),[upvoteId]);}]]);setDidUpvote(true);},[upvoteFetcher,id]);return React.createElement(React.Fragment,null,React.createElement(IonHeader,{className:\"post-detail-header\"},React.createElement(IonToolbar,null,React.createElement(IonButtons,{slot:\"start\"},React.createElement(IonBackButton,{defaultHref:\"/posts\",text:\"Posts\"})))),React.createElement(IonContent,{className:\"post-detail\"},headerImage&&React.createElement(\"div\",{className:\"post-detail-title\"},React.createElement(\"img\",{src:headerImage.data.url,alt:headerImage.description})),React.createElement(IonGrid,null,React.createElement(IonRow,null,React.createElement(IonCol,{className:\"title-section\"},React.createElement(\"h1\",null,post.title),React.createElement(\"span\",{className:\"subtitle\"},\"by \",author.first_name,\" \",author.last_name,' | posted ',dayjs(post.created_on).format('dddd, MMM D, YYYY h:mm a')))),React.createElement(IonRow,null,React.createElement(IonCol,null,React.createElement(Interweave,{content:post.body}))))),React.createElement(IonFooter,null,React.createElement(IonToolbar,{style:{height:'auto'}},React.createElement(IonButtons,{slot:\"start\"},React.createElement(IonButton,{size:\"small\",onClick:makeUpvote,disabled:didUpvote},React.createElement(IonIcon,{slot:\"start\",icon:thumbsUp}),\"Like\"),React.createElement(IonBadge,{color:\"primary\"},upvotes.length)))));};export default PostDetailInner;","map":{"version":3,"sources":["/Users/juliablair/Desktop/christemp/ymun-app/src/pages/PostDetail/PostDetailInner.tsx"],"names":["IonBackButton","IonBadge","IonButton","IonButtons","IonCol","IonContent","IonFooter","IonGrid","IonHeader","IonIcon","IonRow","IonToolbar","dayjs","Interweave","thumbsUp","React","useCallback","useState","useFetcher","useResource","FileResource","PostResource","UpvoteResource","UserResource","PostDetailInner","id","post","detailShape","listShape","created_by","header_image","upvotes","author","headerImage","didUpvote","setDidUpvote","upvoteFetcher","createShape","makeUpvote","parseInt","upvoteId","upvoteIds","data","url","description","title","first_name","last_name","created_on","format","body","height","length"],"mappings":"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","sourcesContent":["import {\n  IonBackButton,\n  IonBadge,\n  IonButton,\n  IonButtons,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonIcon,\n  IonRow,\n  IonToolbar,\n} from '@ionic/react';\nimport dayjs from 'dayjs';\nimport Interweave from 'interweave';\nimport { thumbsUp } from 'ionicons/icons';\nimport React, { useCallback, useState } from 'react';\nimport { useFetcher, useResource } from 'rest-hooks';\nimport FileResource from '../../resources/file';\nimport PostResource from '../../resources/post';\nimport UpvoteResource from '../../resources/upvote';\nimport UserResource from '../../resources/user';\n\ninterface PostDetailInnerProps {\n  id: string;\n}\n\nconst PostDetailInner: React.FC<PostDetailInnerProps> = ({ id }) => {\n  const post = useResource(PostResource.detailShape(), { id });\n  const [upvotes, author, headerImage] = useResource(\n    [UpvoteResource.listShape(), { 'filter[post][=]': id }],\n    [UserResource.detailShape(), { id: post.created_by }],\n    [FileResource.detailShape(), { id: post.header_image }]\n  );\n\n  const [didUpvote, setDidUpvote] = useState<boolean>(false);\n\n  const upvoteFetcher = useFetcher(UpvoteResource.createShape(), true);\n  const makeUpvote = useCallback(() => {\n    upvoteFetcher({}, { post: parseInt(id, 10) }, [\n      [\n        UpvoteResource.listShape(),\n        { 'filter[post][=]': id },\n        (upvoteId: string, upvoteIds: string[] | undefined) => [\n          ...(upvoteIds || []),\n          upvoteId,\n        ],\n      ],\n    ]);\n\n    setDidUpvote(true);\n  }, [upvoteFetcher, id]);\n\n  return (\n    <>\n      <IonHeader className=\"post-detail-header\">\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonBackButton defaultHref=\"/posts\" text=\"Posts\" />\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"post-detail\">\n        {headerImage && (\n          <div className=\"post-detail-title\">\n            <img src={headerImage.data.url} alt={headerImage.description} />\n          </div>\n        )}\n        <IonGrid>\n          <IonRow>\n            <IonCol className=\"title-section\">\n              <h1>{post.title}</h1>\n              <span className=\"subtitle\">\n                by {author.first_name} {author.last_name}\n                {' | posted '}\n                {dayjs(post.created_on).format('dddd, MMM D, YYYY h:mm a')}\n              </span>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol>\n              <Interweave content={post.body} />\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonToolbar style={{ height: 'auto' }}>\n          <IonButtons slot=\"start\">\n            <IonButton size=\"small\" onClick={makeUpvote} disabled={didUpvote}>\n              <IonIcon slot=\"start\" icon={thumbsUp} />\n              Like\n            </IonButton>\n            <IonBadge color=\"primary\">{upvotes.length}</IonBadge>\n          </IonButtons>\n        </IonToolbar>\n      </IonFooter>\n    </>\n  );\n};\nexport default PostDetailInner;\n"]},"metadata":{},"sourceType":"module"}