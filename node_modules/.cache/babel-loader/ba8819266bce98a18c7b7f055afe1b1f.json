{"ast":null,"code":"import _slicedToArray from\"/Users/juliablair/Desktop/christemp/ymun-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButtons,IonContent,IonHeader,IonSelect,IonSelectOption,IonTitle,IonToolbar}from'@ionic/react';import dayjs from'dayjs';import{groupBy,sortBy}from'lodash';import React,{useState}from'react';import{useResource,useRetrieve}from'rest-hooks';import EventResource from'../../resources/event';import LocationResource from'../../resources/location';import EventsListItem from'./EventListItem';var dateFormat='dddd';var EventListInner=function EventListInner(){var events=useResource(EventResource.listShape(),{});useRetrieve(LocationResource.listShape(),{});var eventsByDay=groupBy(events,function(event){return dayjs(event.start_time).format(dateFormat);});var allDays=Object.keys(eventsByDay);// get the current date, or the first day of the schedule if not available\nvar initialDay=function(){var currentDate=dayjs().format(dateFormat);if(allDays.includes(currentDate)){return currentDate;}else{return allDays[0];}}();var _useState=useState(initialDay),_useState2=_slicedToArray(_useState,2),currentDay=_useState2[0],setCurrentDay=_useState2[1];var eventsSorted=sortBy(eventsByDay[currentDay],['start_time']);var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),expandedKey=_useState4[0],setExpandedKey=_useState4[1];return React.createElement(React.Fragment,null,React.createElement(IonHeader,null,React.createElement(IonToolbar,null,React.createElement(IonButtons,{slot:\"primary\"},React.createElement(IonSelect,{value:currentDay,interface:\"popover\",onIonChange:function onIonChange(change){return setCurrentDay(change.detail.value);}},allDays.map(function(day){return React.createElement(IonSelectOption,{key:day},day);}))),React.createElement(IonTitle,null,\"Schedule\"))),React.createElement(IonContent,{className:\"event-list\"},React.createElement(IonHeader,{collapse:\"condense\"},React.createElement(IonToolbar,null,React.createElement(IonTitle,{size:\"large\"},\"Schedule\"))),React.createElement(\"div\",{className:\"background-inner\"},eventsSorted.map(function(event){return React.createElement(EventsListItem,{key:event.id,event:event,expanded:expandedKey===event.id,onClick:function onClick(expanded){// toggle expanded state\nif(expanded){setExpandedKey(undefined);}else{setExpandedKey(event.id);}}});}))));};export default EventListInner;","map":{"version":3,"sources":["/Users/juliablair/Desktop/christemp/ymun-app/src/pages/EventList/EventListInner.tsx"],"names":["IonButtons","IonContent","IonHeader","IonSelect","IonSelectOption","IonTitle","IonToolbar","dayjs","groupBy","sortBy","React","useState","useResource","useRetrieve","EventResource","LocationResource","EventsListItem","dateFormat","EventListInner","events","listShape","eventsByDay","event","start_time","format","allDays","Object","keys","initialDay","currentDate","includes","currentDay","setCurrentDay","eventsSorted","expandedKey","setExpandedKey","change","detail","value","map","day","id","expanded","undefined"],"mappings":"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","sourcesContent":["import {\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonSelect,\n  IonSelectOption,\n  IonTitle,\n  IonToolbar,\n} from '@ionic/react';\nimport dayjs from 'dayjs';\nimport { groupBy, sortBy } from 'lodash';\nimport React, { useState } from 'react';\nimport { useResource, useRetrieve } from 'rest-hooks';\nimport EventResource from '../../resources/event';\nimport LocationResource from '../../resources/location';\nimport EventsListItem from './EventListItem';\n\nconst dateFormat = 'dddd';\n\nconst EventListInner: React.FC = () => {\n  const events = useResource(EventResource.listShape(), {});\n  useRetrieve(LocationResource.listShape(), {});\n\n  const eventsByDay = groupBy(events, (event) =>\n    dayjs(event.start_time).format(dateFormat)\n  );\n  const allDays = Object.keys(eventsByDay);\n\n  // get the current date, or the first day of the schedule if not available\n  const initialDay = (() => {\n    const currentDate = dayjs().format(dateFormat);\n    if (allDays.includes(currentDate)) {\n      return currentDate;\n    } else {\n      return allDays[0];\n    }\n  })();\n\n  const [currentDay, setCurrentDay] = useState(initialDay);\n  const eventsSorted = sortBy(eventsByDay[currentDay], ['start_time']);\n\n  const [expandedKey, setExpandedKey] = useState<number | undefined>();\n\n  return (\n    <>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"primary\">\n            <IonSelect\n              value={currentDay}\n              interface=\"popover\"\n              onIonChange={(change) => setCurrentDay(change.detail.value)}\n            >\n              {allDays.map((day) => (\n                <IonSelectOption key={day}>{day}</IonSelectOption>\n              ))}\n            </IonSelect>\n          </IonButtons>\n          <IonTitle>Schedule</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"event-list\">\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Schedule</IonTitle>\n          </IonToolbar>\n        </IonHeader>\n\n        <div className=\"background-inner\">\n          {eventsSorted.map((event) => (\n            <EventsListItem\n              key={event.id}\n              event={event}\n              expanded={expandedKey === event.id}\n              onClick={(expanded) => {\n                // toggle expanded state\n                if (expanded) {\n                  setExpandedKey(undefined);\n                } else {\n                  setExpandedKey(event.id);\n                }\n              }}\n            />\n          ))}\n        </div>\n      </IonContent>\n    </>\n  );\n};\n\nexport default EventListInner;\n"]},"metadata":{},"sourceType":"module"}