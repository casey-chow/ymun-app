{"ast":null,"code":"import _slicedToArray from \"/Users/juliablair/Desktop/christemp/ymun-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/juliablair/Desktop/christemp/ymun-app/src/pages/PostDetail/PostDetailInner.tsx\";\nimport { IonBackButton, IonBadge, IonButton, IonButtons, IonCol, IonContent, IonFooter, IonGrid, IonHeader, IonIcon, IonRow, IonToolbar } from '@ionic/react';\nimport dayjs from 'dayjs';\nimport Interweave from 'interweave';\nimport { thumbsUp } from 'ionicons/icons';\nimport React, { useCallback, useState } from 'react';\nimport { useFetcher, useResource } from 'rest-hooks';\nimport FileResource from '../../resources/file';\nimport PostResource from '../../resources/post';\nimport UpvoteResource from '../../resources/upvote';\nimport UserResource from '../../resources/user';\n\nconst PostDetailInner = ({\n  id\n}) => {\n  const post = useResource(PostResource.detailShape(), {\n    id\n  });\n\n  const _useResource = useResource([UpvoteResource.listShape(), {\n    'filter[post][=]': id\n  }], [UserResource.detailShape(), {\n    id: post.created_by\n  }], [FileResource.detailShape(), {\n    id: post.header_image\n  }]),\n        _useResource2 = _slicedToArray(_useResource, 3),\n        upvotes = _useResource2[0],\n        author = _useResource2[1],\n        headerImage = _useResource2[2];\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        didUpvote = _useState2[0],\n        setDidUpvote = _useState2[1];\n\n  const upvoteFetcher = useFetcher(UpvoteResource.createShape(), true);\n  const makeUpvote = useCallback(() => {\n    upvoteFetcher({}, {\n      post: parseInt(id, 10)\n    }, [[UpvoteResource.listShape(), {\n      'filter[post][=]': id\n    }, (upvoteId, upvoteIds) => [...(upvoteIds || []), upvoteId]]]);\n    setDidUpvote(true);\n  }, [upvoteFetcher, id]);\n  return React.createElement(React.Fragment, null, React.createElement(IonHeader, {\n    className: \"post-detail-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(IonToolbar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(IonButtons, {\n    slot: \"start\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(IonBackButton, {\n    defaultHref: \"/posts\",\n    text: \"Posts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })))), React.createElement(IonContent, {\n    className: \"post-detail\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, headerImage && React.createElement(\"div\", {\n    className: \"post-detail-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: headerImage.data.url,\n    alt: headerImage.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  })), React.createElement(IonGrid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(IonRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(IonCol, {\n    className: \"title-section\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, post.title), React.createElement(\"span\", {\n    className: \"subtitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"by \", author.first_name, \" \", author.last_name, ' | posted ', dayjs(post.created_on).format('dddd, MMM D, YYYY h:mm a')))), React.createElement(IonRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(IonCol, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Interweave, {\n    content: post.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }))))), React.createElement(IonFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(IonToolbar, {\n    style: {\n      height: 'auto'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(IonButtons, {\n    slot: \"start\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(IonButton, {\n    size: \"small\",\n    onClick: makeUpvote,\n    disabled: didUpvote,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(IonIcon, {\n    slot: \"start\",\n    icon: thumbsUp,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), \"Like\"), React.createElement(IonBadge, {\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, upvotes.length)))));\n};\n\nexport default PostDetailInner;","map":{"version":3,"sources":["/Users/juliablair/Desktop/christemp/ymun-app/src/pages/PostDetail/PostDetailInner.tsx"],"names":["IonBackButton","IonBadge","IonButton","IonButtons","IonCol","IonContent","IonFooter","IonGrid","IonHeader","IonIcon","IonRow","IonToolbar","dayjs","Interweave","thumbsUp","React","useCallback","useState","useFetcher","useResource","FileResource","PostResource","UpvoteResource","UserResource","PostDetailInner","id","post","detailShape","listShape","created_by","header_image","upvotes","author","headerImage","didUpvote","setDidUpvote","upvoteFetcher","createShape","makeUpvote","parseInt","upvoteId","upvoteIds","data","url","description","title","first_name","last_name","created_on","format","body","height","length"],"mappings":"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","sourcesContent":["import {\n  IonBackButton,\n  IonBadge,\n  IonButton,\n  IonButtons,\n  IonCol,\n  IonContent,\n  IonFooter,\n  IonGrid,\n  IonHeader,\n  IonIcon,\n  IonRow,\n  IonToolbar,\n} from '@ionic/react';\nimport dayjs from 'dayjs';\nimport Interweave from 'interweave';\nimport { thumbsUp } from 'ionicons/icons';\nimport React, { useCallback, useState } from 'react';\nimport { useFetcher, useResource } from 'rest-hooks';\nimport FileResource from '../../resources/file';\nimport PostResource from '../../resources/post';\nimport UpvoteResource from '../../resources/upvote';\nimport UserResource from '../../resources/user';\n\ninterface PostDetailInnerProps {\n  id: string;\n}\n\nconst PostDetailInner: React.FC<PostDetailInnerProps> = ({ id }) => {\n  const post = useResource(PostResource.detailShape(), { id });\n  const [upvotes, author, headerImage] = useResource(\n    [UpvoteResource.listShape(), { 'filter[post][=]': id }],\n    [UserResource.detailShape(), { id: post.created_by }],\n    [FileResource.detailShape(), { id: post.header_image }]\n  );\n\n  const [didUpvote, setDidUpvote] = useState<boolean>(false);\n\n  const upvoteFetcher = useFetcher(UpvoteResource.createShape(), true);\n  const makeUpvote = useCallback(() => {\n    upvoteFetcher({}, { post: parseInt(id, 10) }, [\n      [\n        UpvoteResource.listShape(),\n        { 'filter[post][=]': id },\n        (upvoteId: string, upvoteIds: string[] | undefined) => [\n          ...(upvoteIds || []),\n          upvoteId,\n        ],\n      ],\n    ]);\n\n    setDidUpvote(true);\n  }, [upvoteFetcher, id]);\n\n  return (\n    <>\n      <IonHeader className=\"post-detail-header\">\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonBackButton defaultHref=\"/posts\" text=\"Posts\" />\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"post-detail\">\n        {headerImage && (\n          <div className=\"post-detail-title\">\n            <img src={headerImage.data.url} alt={headerImage.description} />\n          </div>\n        )}\n        <IonGrid>\n          <IonRow>\n            <IonCol className=\"title-section\">\n              <h1>{post.title}</h1>\n              <span className=\"subtitle\">\n                by {author.first_name} {author.last_name}\n                {' | posted '}\n                {dayjs(post.created_on).format('dddd, MMM D, YYYY h:mm a')}\n              </span>\n            </IonCol>\n          </IonRow>\n          <IonRow>\n            <IonCol>\n              <Interweave content={post.body} />\n            </IonCol>\n          </IonRow>\n        </IonGrid>\n      </IonContent>\n      <IonFooter>\n        <IonToolbar style={{ height: 'auto' }}>\n          <IonButtons slot=\"start\">\n            <IonButton size=\"small\" onClick={makeUpvote} disabled={didUpvote}>\n              <IonIcon slot=\"start\" icon={thumbsUp} />\n              Like\n            </IonButton>\n            <IonBadge color=\"primary\">{upvotes.length}</IonBadge>\n          </IonButtons>\n        </IonToolbar>\n      </IonFooter>\n    </>\n  );\n};\nexport default PostDetailInner;\n"]},"metadata":{},"sourceType":"module"}