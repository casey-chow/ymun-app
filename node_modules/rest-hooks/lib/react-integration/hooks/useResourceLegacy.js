import _toConsumableArray from "@babel/runtime/helpers/esm/toConsumableArray";
import _slicedToArray from "@babel/runtime/helpers/esm/slicedToArray";
import useCacheLegacy from './useCacheLegacy';
import useRetrieve from './useRetrieve';
import useError from './useError';
import { useMemo } from 'react';
import hasUsableData from './hasUsableData';

/** single form resource */
function useOneResource(fetchShape, params) {
  // maybePromise is undefined when data is stale or params is null
  var maybePromise = useRetrieve(fetchShape, params); // resource is null when it is not in cache or params is null

  var resource = useCacheLegacy(fetchShape, params);
  var error = useError(fetchShape, params, !!resource);
  if (!hasUsableData(!!resource, fetchShape) && maybePromise) throw maybePromise;
  if (error) throw error;
  return resource;
}
/** many form resource */


function useManyResources() {
  for (var _len = arguments.length, resourceList = new Array(_len), _key = 0; _key < _len; _key++) {
    resourceList[_key] = arguments[_key];
  }

  var resources = resourceList.map(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
        fetchShape = _ref2[0],
        params = _ref2[1];

    return (// eslint-disable-next-line react-hooks/rules-of-hooks
      useCacheLegacy(fetchShape, params)
    );
  });
  var promises = resourceList.map(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 2),
        fetchShape = _ref4[0],
        params = _ref4[1];

    return (// eslint-disable-next-line react-hooks/rules-of-hooks
      useRetrieve(fetchShape, params)
    );
  }) // only wait on promises without results
  .map(function (p, i) {
    return !hasUsableData(!!resources[i], resourceList[i][0]) && p;
  }); // throw first valid error

  for (var i = 0; i < resourceList.length; i++) {
    var _resourceList$i = _slicedToArray(resourceList[i], 2),
        _fetchShape = _resourceList$i[0],
        _params = _resourceList$i[1];

    var resource = resources[i]; // eslint-disable-next-line react-hooks/rules-of-hooks

    var error = useError(_fetchShape, _params, !!resource);
    if (error && !promises[i]) throw error;
  }

  var promise = useMemo(function () {
    var activePromises = promises.filter(function (p) {
      return p;
    });

    if (activePromises.length) {
      return Promise.all(activePromises);
    } // eslint-disable-next-line react-hooks/exhaustive-deps

  }, promises);
  if (promise) throw promise;
  return resources;
}

export default function useResourceLegacy() {
  for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
    args[_key2] = arguments[_key2];
  }

  // this conditional use of hooks is ok as long as the structure of the arguments don't change
  if (Array.isArray(args[0])) {
    // TODO: provide type guard function to detect this
    // eslint-disable-next-line react-hooks/rules-of-hooks
    return useManyResources.apply(void 0, _toConsumableArray(args));
  }

  args = args; // TODO: make return types match up with the branching logic we put in here.
  // eslint-disable-next-line react-hooks/rules-of-hooks

  return useOneResource(args[0], args[1]);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yZWFjdC1pbnRlZ3JhdGlvbi9ob29rcy91c2VSZXNvdXJjZUxlZ2FjeS50cyJdLCJuYW1lcyI6WyJ1c2VDYWNoZUxlZ2FjeSIsInVzZVJldHJpZXZlIiwidXNlRXJyb3IiLCJ1c2VNZW1vIiwiaGFzVXNhYmxlRGF0YSIsInVzZU9uZVJlc291cmNlIiwiZmV0Y2hTaGFwZSIsInBhcmFtcyIsIm1heWJlUHJvbWlzZSIsInJlc291cmNlIiwiZXJyb3IiLCJ1c2VNYW55UmVzb3VyY2VzIiwicmVzb3VyY2VMaXN0IiwicmVzb3VyY2VzIiwibWFwIiwicHJvbWlzZXMiLCJwIiwiaSIsImxlbmd0aCIsInByb21pc2UiLCJhY3RpdmVQcm9taXNlcyIsImZpbHRlciIsIlByb21pc2UiLCJhbGwiLCJ1c2VSZXNvdXJjZUxlZ2FjeSIsImFyZ3MiLCJBcnJheSIsImlzQXJyYXkiXSwibWFwcGluZ3MiOiI7O0FBQ0EsT0FBT0EsY0FBUCxNQUEyQixrQkFBM0I7QUFDQSxPQUFPQyxXQUFQLE1BQXdCLGVBQXhCO0FBQ0EsT0FBT0MsUUFBUCxNQUFxQixZQUFyQjtBQUNBLFNBQVNDLE9BQVQsUUFBd0IsT0FBeEI7QUFFQSxPQUFPQyxhQUFQLE1BQTBCLGlCQUExQjs7QUFPQTtBQUNBLFNBQVNDLGNBQVQsQ0FDRUMsVUFERixFQUVFQyxNQUZGLEVBR3FEO0FBQ25EO0FBQ0EsTUFBTUMsWUFBWSxHQUFHUCxXQUFXLENBQUNLLFVBQUQsRUFBYUMsTUFBYixDQUFoQyxDQUZtRCxDQUduRDs7QUFDQSxNQUFNRSxRQUFRLEdBQUdULGNBQWMsQ0FBQ00sVUFBRCxFQUFhQyxNQUFiLENBQS9CO0FBQ0EsTUFBTUcsS0FBSyxHQUFHUixRQUFRLENBQUNJLFVBQUQsRUFBYUMsTUFBYixFQUFxQixDQUFDLENBQUNFLFFBQXZCLENBQXRCO0FBRUEsTUFBSSxDQUFDTCxhQUFhLENBQUMsQ0FBQyxDQUFDSyxRQUFILEVBQWFILFVBQWIsQ0FBZCxJQUEwQ0UsWUFBOUMsRUFDRSxNQUFNQSxZQUFOO0FBQ0YsTUFBSUUsS0FBSixFQUFXLE1BQU1BLEtBQU47QUFFWCxTQUFPRCxRQUFQO0FBQ0Q7QUFFRDs7O0FBQ0EsU0FBU0UsZ0JBQVQsR0FFRTtBQUFBLG9DQURHQyxZQUNIO0FBREdBLElBQUFBLFlBQ0g7QUFBQTs7QUFDQSxNQUFNQyxTQUFTLEdBQUdELFlBQVksQ0FBQ0UsR0FBYixDQUNoQjtBQUFBO0FBQUEsUUFDRVIsVUFERjtBQUFBLFFBRUVDLE1BRkY7O0FBQUEsV0FJRTtBQUNBUCxNQUFBQSxjQUFjLENBQUNNLFVBQUQsRUFBYUMsTUFBYjtBQUxoQjtBQUFBLEdBRGdCLENBQWxCO0FBUUEsTUFBTVEsUUFBUSxHQUFHSCxZQUFZLENBQzFCRSxHQURjLENBQ1Y7QUFBQTtBQUFBLFFBQUVSLFVBQUY7QUFBQSxRQUFjQyxNQUFkOztBQUFBLFdBQ0g7QUFDQU4sTUFBQUEsV0FBVyxDQUFDSyxVQUFELEVBQWFDLE1BQWI7QUFGUjtBQUFBLEdBRFUsRUFLZjtBQUxlLEdBTWRPLEdBTmMsQ0FNVixVQUFDRSxDQUFELEVBQUlDLENBQUo7QUFBQSxXQUFVLENBQUNiLGFBQWEsQ0FBQyxDQUFDLENBQUNTLFNBQVMsQ0FBQ0ksQ0FBRCxDQUFaLEVBQWlCTCxZQUFZLENBQUNLLENBQUQsQ0FBWixDQUFnQixDQUFoQixDQUFqQixDQUFkLElBQXNERCxDQUFoRTtBQUFBLEdBTlUsQ0FBakIsQ0FUQSxDQWlCQTs7QUFDQSxPQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdMLFlBQVksQ0FBQ00sTUFBakMsRUFBeUNELENBQUMsRUFBMUMsRUFBOEM7QUFBQSx5Q0FDZkwsWUFBWSxDQUFDSyxDQUFELENBREc7QUFBQSxRQUNyQ1gsV0FEcUM7QUFBQSxRQUN6QkMsT0FEeUI7O0FBRTVDLFFBQU1FLFFBQVEsR0FBR0ksU0FBUyxDQUFDSSxDQUFELENBQTFCLENBRjRDLENBRzVDOztBQUNBLFFBQU1QLEtBQUssR0FBR1IsUUFBUSxDQUFDSSxXQUFELEVBQWFDLE9BQWIsRUFBcUIsQ0FBQyxDQUFDRSxRQUF2QixDQUF0QjtBQUNBLFFBQUlDLEtBQUssSUFBSSxDQUFDSyxRQUFRLENBQUNFLENBQUQsQ0FBdEIsRUFBMkIsTUFBTVAsS0FBTjtBQUM1Qjs7QUFFRCxNQUFNUyxPQUFPLEdBQUdoQixPQUFPLENBQUMsWUFBTTtBQUM1QixRQUFNaUIsY0FBYyxHQUFHTCxRQUFRLENBQUNNLE1BQVQsQ0FBZ0IsVUFBQUwsQ0FBQztBQUFBLGFBQUlBLENBQUo7QUFBQSxLQUFqQixDQUF2Qjs7QUFDQSxRQUFJSSxjQUFjLENBQUNGLE1BQW5CLEVBQTJCO0FBQ3pCLGFBQU9JLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSCxjQUFaLENBQVA7QUFDRCxLQUoyQixDQUs1Qjs7QUFDRCxHQU5zQixFQU1wQkwsUUFOb0IsQ0FBdkI7QUFRQSxNQUFJSSxPQUFKLEVBQWEsTUFBTUEsT0FBTjtBQUViLFNBQU9OLFNBQVA7QUFDRDs7QUFxRkQsZUFBZSxTQUFTVyxpQkFBVCxHQUdpRDtBQUFBLHFDQUEzREMsSUFBMkQ7QUFBM0RBLElBQUFBLElBQTJEO0FBQUE7O0FBQzlEO0FBQ0EsTUFBSUMsS0FBSyxDQUFDQyxPQUFOLENBQWNGLElBQUksQ0FBQyxDQUFELENBQWxCLENBQUosRUFBNEI7QUFDMUI7QUFDQTtBQUNBLFdBQU9kLGdCQUFnQixNQUFoQiw0QkFBcUJjLElBQXJCLEVBQVA7QUFDRDs7QUFDREEsRUFBQUEsSUFBSSxHQUFHQSxJQUFQLENBUDhELENBUTlEO0FBQ0E7O0FBQ0EsU0FBT3BCLGNBQWMsQ0FBQ29CLElBQUksQ0FBQyxDQUFELENBQUwsRUFBVUEsSUFBSSxDQUFDLENBQUQsQ0FBZCxDQUFyQjtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVhZFNoYXBlLCBTY2hlbWEsIFNjaGVtYU9mIH0gZnJvbSAnfi9yZXNvdXJjZSc7XG5pbXBvcnQgdXNlQ2FjaGVMZWdhY3kgZnJvbSAnLi91c2VDYWNoZUxlZ2FjeSc7XG5pbXBvcnQgdXNlUmV0cmlldmUgZnJvbSAnLi91c2VSZXRyaWV2ZSc7XG5pbXBvcnQgdXNlRXJyb3IgZnJvbSAnLi91c2VFcnJvcic7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgaGFzVXNhYmxlRGF0YSBmcm9tICcuL2hhc1VzYWJsZURhdGEnO1xuXG50eXBlIFJlc291cmNlQXJnczxTIGV4dGVuZHMgU2NoZW1hLCBQYXJhbXMgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+PiA9IFtcbiAgUmVhZFNoYXBlPFMsIFBhcmFtcz4sXG4gIFBhcmFtcyB8IG51bGwsXG5dO1xuXG4vKiogc2luZ2xlIGZvcm0gcmVzb3VyY2UgKi9cbmZ1bmN0aW9uIHVzZU9uZVJlc291cmNlPFBhcmFtcyBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4sIFMgZXh0ZW5kcyBTY2hlbWE+KFxuICBmZXRjaFNoYXBlOiBSZWFkU2hhcGU8UywgUGFyYW1zPixcbiAgcGFyYW1zOiBQYXJhbXMgfCBudWxsLFxuKTogQ29uZE51bGw8dHlwZW9mIHBhcmFtcywgTm9uTnVsbGFibGU8U2NoZW1hT2Y8Uz4+PiB7XG4gIC8vIG1heWJlUHJvbWlzZSBpcyB1bmRlZmluZWQgd2hlbiBkYXRhIGlzIHN0YWxlIG9yIHBhcmFtcyBpcyBudWxsXG4gIGNvbnN0IG1heWJlUHJvbWlzZSA9IHVzZVJldHJpZXZlKGZldGNoU2hhcGUsIHBhcmFtcyk7XG4gIC8vIHJlc291cmNlIGlzIG51bGwgd2hlbiBpdCBpcyBub3QgaW4gY2FjaGUgb3IgcGFyYW1zIGlzIG51bGxcbiAgY29uc3QgcmVzb3VyY2UgPSB1c2VDYWNoZUxlZ2FjeShmZXRjaFNoYXBlLCBwYXJhbXMpO1xuICBjb25zdCBlcnJvciA9IHVzZUVycm9yKGZldGNoU2hhcGUsIHBhcmFtcywgISFyZXNvdXJjZSk7XG5cbiAgaWYgKCFoYXNVc2FibGVEYXRhKCEhcmVzb3VyY2UsIGZldGNoU2hhcGUpICYmIG1heWJlUHJvbWlzZSlcbiAgICB0aHJvdyBtYXliZVByb21pc2U7XG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgcmV0dXJuIHJlc291cmNlIGFzIGFueTtcbn1cblxuLyoqIG1hbnkgZm9ybSByZXNvdXJjZSAqL1xuZnVuY3Rpb24gdXNlTWFueVJlc291cmNlczxBIGV4dGVuZHMgUmVzb3VyY2VBcmdzPGFueSwgYW55PltdPihcbiAgLi4ucmVzb3VyY2VMaXN0OiBBXG4pIHtcbiAgY29uc3QgcmVzb3VyY2VzID0gcmVzb3VyY2VMaXN0Lm1hcChcbiAgICA8UGFyYW1zIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PiwgUyBleHRlbmRzIFNjaGVtYT4oW1xuICAgICAgZmV0Y2hTaGFwZSxcbiAgICAgIHBhcmFtcyxcbiAgICBdOiBSZXNvdXJjZUFyZ3M8UywgUGFyYW1zPikgPT5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgICAgdXNlQ2FjaGVMZWdhY3koZmV0Y2hTaGFwZSwgcGFyYW1zKSxcbiAgKTtcbiAgY29uc3QgcHJvbWlzZXMgPSByZXNvdXJjZUxpc3RcbiAgICAubWFwKChbZmV0Y2hTaGFwZSwgcGFyYW1zXSkgPT5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgICAgdXNlUmV0cmlldmUoZmV0Y2hTaGFwZSwgcGFyYW1zKSxcbiAgICApXG4gICAgLy8gb25seSB3YWl0IG9uIHByb21pc2VzIHdpdGhvdXQgcmVzdWx0c1xuICAgIC5tYXAoKHAsIGkpID0+ICFoYXNVc2FibGVEYXRhKCEhcmVzb3VyY2VzW2ldLCByZXNvdXJjZUxpc3RbaV1bMF0pICYmIHApO1xuXG4gIC8vIHRocm93IGZpcnN0IHZhbGlkIGVycm9yXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzb3VyY2VMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgW2ZldGNoU2hhcGUsIHBhcmFtc10gPSByZXNvdXJjZUxpc3RbaV07XG4gICAgY29uc3QgcmVzb3VyY2UgPSByZXNvdXJjZXNbaV07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gICAgY29uc3QgZXJyb3IgPSB1c2VFcnJvcihmZXRjaFNoYXBlLCBwYXJhbXMsICEhcmVzb3VyY2UpO1xuICAgIGlmIChlcnJvciAmJiAhcHJvbWlzZXNbaV0pIHRocm93IGVycm9yO1xuICB9XG5cbiAgY29uc3QgcHJvbWlzZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZVByb21pc2VzID0gcHJvbWlzZXMuZmlsdGVyKHAgPT4gcCk7XG4gICAgaWYgKGFjdGl2ZVByb21pc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGFjdGl2ZVByb21pc2VzKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICB9LCBwcm9taXNlcyk7XG5cbiAgaWYgKHByb21pc2UpIHRocm93IHByb21pc2U7XG5cbiAgcmV0dXJuIHJlc291cmNlcztcbn1cblxudHlwZSBDb25kTnVsbDxQLCBSPiA9IFAgZXh0ZW5kcyBudWxsID8gbnVsbCA6IFI7XG5cbi8qKiBFbnN1cmUgYSByZXNvdXJjZSBpcyBhdmFpbGFibGU7IHN1c3BlbmRpbmcgdG8gUmVhY3QgdW50aWwgaXQgaXMuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUCBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4gfCBudWxsLFxuICBTIGV4dGVuZHMgU2NoZW1hXG4+KFxuICBmZXRjaFNoYXBlOiBSZWFkU2hhcGU8UywgTm9uTnVsbGFibGU8UD4+LFxuICBwYXJhbXM6IFAsXG4pOiBDb25kTnVsbDxQLCBTY2hlbWFPZjxTPj47XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUDEgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzEgZXh0ZW5kcyBTY2hlbWFcbj4odjE6IFtSZWFkU2hhcGU8UzEsIE5vbk51bGxhYmxlPFAxPj4sIFAxXSk6IFtDb25kTnVsbDxQMSwgU2NoZW1hT2Y8UzE+Pl07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUDEgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzEgZXh0ZW5kcyBTY2hlbWEsXG4gIFAyIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PiB8IG51bGwsXG4gIFMyIGV4dGVuZHMgU2NoZW1hXG4+KFxuICB2MTogW1JlYWRTaGFwZTxTMSwgTm9uTnVsbGFibGU8UDE+PiwgUDFdLFxuICB2MjogW1JlYWRTaGFwZTxTMiwgTm9uTnVsbGFibGU8UDI+PiwgUDJdLFxuKTogW0NvbmROdWxsPFAxLCBTY2hlbWFPZjxTMT4+LCBDb25kTnVsbDxQMiwgU2NoZW1hT2Y8UzI+Pl07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUDEgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzEgZXh0ZW5kcyBTY2hlbWEsXG4gIFAyIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PiB8IG51bGwsXG4gIFMyIGV4dGVuZHMgU2NoZW1hLFxuICBQMyBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4gfCBudWxsLFxuICBTMyBleHRlbmRzIFNjaGVtYVxuPihcbiAgdjE6IFtSZWFkU2hhcGU8UzEsIE5vbk51bGxhYmxlPFAxPj4sIFAxXSxcbiAgdjI6IFtSZWFkU2hhcGU8UzIsIE5vbk51bGxhYmxlPFAyPj4sIFAyXSxcbiAgdjM6IFtSZWFkU2hhcGU8UzMsIE5vbk51bGxhYmxlPFAzPj4sIFAzXSxcbik6IFtcbiAgQ29uZE51bGw8UDEsIFNjaGVtYU9mPFMxPj4sXG4gIENvbmROdWxsPFAyLCBTY2hlbWFPZjxTMj4+LFxuICBDb25kTnVsbDxQMywgU2NoZW1hT2Y8UzM+Pixcbl07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUDEgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzEgZXh0ZW5kcyBTY2hlbWEsXG4gIFAyIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PiB8IG51bGwsXG4gIFMyIGV4dGVuZHMgU2NoZW1hLFxuICBQMyBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4gfCBudWxsLFxuICBTMyBleHRlbmRzIFNjaGVtYSxcbiAgUDQgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzQgZXh0ZW5kcyBTY2hlbWFcbj4oXG4gIHYxOiBbUmVhZFNoYXBlPFMxLCBOb25OdWxsYWJsZTxQMT4+LCBQMV0sXG4gIHYyOiBbUmVhZFNoYXBlPFMyLCBOb25OdWxsYWJsZTxQMj4+LCBQMl0sXG4gIHYzOiBbUmVhZFNoYXBlPFMzLCBOb25OdWxsYWJsZTxQMz4+LCBQM10sXG4gIHY0OiBbUmVhZFNoYXBlPFM0LCBOb25OdWxsYWJsZTxQND4+LCBQNF0sXG4pOiBbXG4gIENvbmROdWxsPFAxLCBTY2hlbWFPZjxTMT4+LFxuICBDb25kTnVsbDxQMiwgU2NoZW1hT2Y8UzI+PixcbiAgQ29uZE51bGw8UDMsIFNjaGVtYU9mPFMzPj4sXG4gIENvbmROdWxsPFA0LCBTY2hlbWFPZjxTND4+LFxuXTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVJlc291cmNlTGVnYWN5PFxuICBQMSBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4gfCBudWxsLFxuICBTMSBleHRlbmRzIFNjaGVtYSxcbiAgUDIgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzIgZXh0ZW5kcyBTY2hlbWEsXG4gIFAzIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PiB8IG51bGwsXG4gIFMzIGV4dGVuZHMgU2NoZW1hLFxuICBQNCBleHRlbmRzIFJlYWRvbmx5PG9iamVjdD4gfCBudWxsLFxuICBTNCBleHRlbmRzIFNjaGVtYSxcbiAgUDUgZXh0ZW5kcyBSZWFkb25seTxvYmplY3Q+IHwgbnVsbCxcbiAgUzUgZXh0ZW5kcyBTY2hlbWFcbj4oXG4gIHYxOiBbUmVhZFNoYXBlPFMxLCBOb25OdWxsYWJsZTxQMT4+LCBQMV0sXG4gIHYyOiBbUmVhZFNoYXBlPFMyLCBOb25OdWxsYWJsZTxQMj4+LCBQMl0sXG4gIHYzOiBbUmVhZFNoYXBlPFMzLCBOb25OdWxsYWJsZTxQMz4+LCBQM10sXG4gIHY0OiBbUmVhZFNoYXBlPFM0LCBOb25OdWxsYWJsZTxQND4+LCBQNF0sXG4gIHY1OiBbUmVhZFNoYXBlPFM1LCBOb25OdWxsYWJsZTxQNT4+LCBQNV0sXG4pOiBbXG4gIENvbmROdWxsPFAxLCBTY2hlbWFPZjxTMT4+LFxuICBDb25kTnVsbDxQMiwgU2NoZW1hT2Y8UzI+PixcbiAgQ29uZE51bGw8UDMsIFNjaGVtYU9mPFMzPj4sXG4gIENvbmROdWxsPFA0LCBTY2hlbWFPZjxTND4+LFxuICBDb25kTnVsbDxQNSwgU2NoZW1hT2Y8UzU+Pixcbl07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VSZXNvdXJjZUxlZ2FjeTxcbiAgUGFyYW1zIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PixcbiAgUyBleHRlbmRzIFNjaGVtYVxuPiguLi5hcmdzOiBSZXNvdXJjZUFyZ3M8UywgUGFyYW1zPiB8IFJlc291cmNlQXJnczxTLCBQYXJhbXM+W10pIHtcbiAgLy8gdGhpcyBjb25kaXRpb25hbCB1c2Ugb2YgaG9va3MgaXMgb2sgYXMgbG9uZyBhcyB0aGUgc3RydWN0dXJlIG9mIHRoZSBhcmd1bWVudHMgZG9uJ3QgY2hhbmdlXG4gIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgLy8gVE9ETzogcHJvdmlkZSB0eXBlIGd1YXJkIGZ1bmN0aW9uIHRvIGRldGVjdCB0aGlzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL3J1bGVzLW9mLWhvb2tzXG4gICAgcmV0dXJuIHVzZU1hbnlSZXNvdXJjZXMoLi4uKGFyZ3MgYXMgUmVzb3VyY2VBcmdzPFMsIFBhcmFtcz5bXSkpO1xuICB9XG4gIGFyZ3MgPSBhcmdzIGFzIFJlc291cmNlQXJnczxTLCBQYXJhbXM+O1xuICAvLyBUT0RPOiBtYWtlIHJldHVybiB0eXBlcyBtYXRjaCB1cCB3aXRoIHRoZSBicmFuY2hpbmcgbG9naWMgd2UgcHV0IGluIGhlcmUuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICByZXR1cm4gdXNlT25lUmVzb3VyY2UoYXJnc1swXSwgYXJnc1sxXSk7XG59XG4iXX0=