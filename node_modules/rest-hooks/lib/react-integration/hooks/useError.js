import useMeta from './useMeta';

/** Access a resource or error if failed to get it */
export default function useError(fetchShape, params, cacheReady) {
  var meta = useMeta(fetchShape, params);
  if (!params) return;

  if (!cacheReady) {
    if (!meta) return;

    if (!meta.error) {
      // this means we probably deleted the entity found in this result
      var err = new Error("Resource not found in cache ".concat(params ? fetchShape.getFetchKey(params) : ''));
      err.status = 404;
      return err;
    } else {
      return meta.error;
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yZWFjdC1pbnRlZ3JhdGlvbi9ob29rcy91c2VFcnJvci50cyJdLCJuYW1lcyI6WyJ1c2VNZXRhIiwidXNlRXJyb3IiLCJmZXRjaFNoYXBlIiwicGFyYW1zIiwiY2FjaGVSZWFkeSIsIm1ldGEiLCJlcnJvciIsImVyciIsIkVycm9yIiwiZ2V0RmV0Y2hLZXkiLCJzdGF0dXMiXSwibWFwcGluZ3MiOiJBQUNBLE9BQU9BLE9BQVAsTUFBb0IsV0FBcEI7O0FBSUE7QUFDQSxlQUFlLFNBQVNDLFFBQVQsQ0FJYkMsVUFKYSxFQUtiQyxNQUxhLEVBTWJDLFVBTmEsRUFPa0I7QUFDL0IsTUFBTUMsSUFBSSxHQUFHTCxPQUFPLENBQUNFLFVBQUQsRUFBYUMsTUFBYixDQUFwQjtBQUNBLE1BQUksQ0FBQ0EsTUFBTCxFQUFhOztBQUNiLE1BQUksQ0FBQ0MsVUFBTCxFQUFpQjtBQUNmLFFBQUksQ0FBQ0MsSUFBTCxFQUFXOztBQUNYLFFBQUksQ0FBQ0EsSUFBSSxDQUFDQyxLQUFWLEVBQWlCO0FBQ2Y7QUFDQSxVQUFNQyxHQUFRLEdBQUcsSUFBSUMsS0FBSix1Q0FFYkwsTUFBTSxHQUFHRCxVQUFVLENBQUNPLFdBQVgsQ0FBdUJOLE1BQXZCLENBQUgsR0FBb0MsRUFGN0IsRUFBakI7QUFLQUksTUFBQUEsR0FBRyxDQUFDRyxNQUFKLEdBQWEsR0FBYjtBQUNBLGFBQU9ILEdBQVA7QUFDRCxLQVRELE1BU087QUFDTCxhQUFPRixJQUFJLENBQUNDLEtBQVo7QUFDRDtBQUNGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWFkU2hhcGUsIFNjaGVtYSB9IGZyb20gJ34vcmVzb3VyY2UnO1xuaW1wb3J0IHVzZU1ldGEgZnJvbSAnLi91c2VNZXRhJztcblxudHlwZSBVc2VFcnJvclJldHVybjxQPiA9IFAgZXh0ZW5kcyBudWxsID8gdW5kZWZpbmVkIDogRXJyb3I7XG5cbi8qKiBBY2Nlc3MgYSByZXNvdXJjZSBvciBlcnJvciBpZiBmYWlsZWQgdG8gZ2V0IGl0ICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VFcnJvcjxcbiAgUGFyYW1zIGV4dGVuZHMgUmVhZG9ubHk8b2JqZWN0PixcbiAgUyBleHRlbmRzIFNjaGVtYVxuPihcbiAgZmV0Y2hTaGFwZTogUmVhZFNoYXBlPFMsIFBhcmFtcz4sXG4gIHBhcmFtczogUGFyYW1zIHwgbnVsbCxcbiAgY2FjaGVSZWFkeTogYm9vbGVhbixcbik6IFVzZUVycm9yUmV0dXJuPHR5cGVvZiBwYXJhbXM+IHtcbiAgY29uc3QgbWV0YSA9IHVzZU1ldGEoZmV0Y2hTaGFwZSwgcGFyYW1zKTtcbiAgaWYgKCFwYXJhbXMpIHJldHVybjtcbiAgaWYgKCFjYWNoZVJlYWR5KSB7XG4gICAgaWYgKCFtZXRhKSByZXR1cm47XG4gICAgaWYgKCFtZXRhLmVycm9yKSB7XG4gICAgICAvLyB0aGlzIG1lYW5zIHdlIHByb2JhYmx5IGRlbGV0ZWQgdGhlIGVudGl0eSBmb3VuZCBpbiB0aGlzIHJlc3VsdFxuICAgICAgY29uc3QgZXJyOiBhbnkgPSBuZXcgRXJyb3IoXG4gICAgICAgIGBSZXNvdXJjZSBub3QgZm91bmQgaW4gY2FjaGUgJHtcbiAgICAgICAgICBwYXJhbXMgPyBmZXRjaFNoYXBlLmdldEZldGNoS2V5KHBhcmFtcykgOiAnJ1xuICAgICAgICB9YCxcbiAgICAgICk7XG4gICAgICBlcnIuc3RhdHVzID0gNDA0O1xuICAgICAgcmV0dXJuIGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1ldGEuZXJyb3IgYXMgYW55O1xuICAgIH1cbiAgfVxufVxuIl19